// *********************************************************************
// Generated by JagStudio
// Based on BCX32 - BASIC To C/C++ Translator (V) 6.00 (2009/06/02)
//                 BCX (c) 1999 - 2009 by Kevin Diggins
//              Translated for compiling with a C Compiler
// *********************************************************************
// *********************************************************************

// ***************************************************
// Compiler Defines
// ***************************************************

// C++
#if defined( __cplusplus )
  #define overloaded
  #define C_EXPORT EXTERN_C __declspec(dllexport)
  #define C_IMPORT EXTERN_C __declspec(dllimport)
#else
  #define C_EXPORT __declspec(dllexport)
  #define C_IMPORT __declspec(dllimport)
#endif

#include "jstudio.h"
#include "romassets.h"
#define UINT unsigned int
#define WORD short
#define BYTE char
#define UWORD unsigned short
#define UBYTE unsigned char
//Lines inserted deliberately because of some bcx brokeness - fix at some point!
//Lines inserted deliberately because of some bcx brokeness - fix at some point!
//Lines inserted deliberately because of some bcx brokeness - fix at some point!
#define peek(x) (*(volatile char *)(x))
#define dpeek(x) (*(volatile short *)(x))
#define lpeek(x) (*(volatile int *)(x))
// *************************************************
//               Standard Macros
// *************************************************
#define BAND &
#define STRPTR(A)((char*)&(A))
// *************************************************
//               Standard Prototypes
// *************************************************
char*   BCX_TmpStr(size_t);

// *************************************************
//                System Variables
// *************************************************


// *************************************************
//            User Global Variables
// *************************************************

static int     language;
static int     pad1;
static short   i;
static short   j;
static char    message_pressfire[3][40];
static char    messages[3][5][48];

char*   string (int,int);

// *************************************************
//               User Prototypes
// *************************************************

char    * convert_utf8 (char *);

// *************************************************
//        User's GLOBAL ENUM blocks
// *************************************************

enum
  {
    English,
    French,
    Italian
  };


enum
  {
    msg_hi=0,
    msg_bye,
    msg_win,
    msg_lose,
    msg_ready,
    num_messages
  };





// *************************************************
//            User Global Initialized Arrays
// *************************************************


// *************************************************
//                  Main Program
// *************************************************

void basicmain()
{
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 8] jsfSetFontIndx(0)
jsfSetFontIndx(0);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 9] jsfSetFontSize(0)
jsfSetFontSize(0);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 12] enum
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 19] dim language%
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 22] language=English
language=English;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 25] dim message_pressfire$[3][40] as char
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 26] message_pressfire$[English]="Press fire to start              "
strcpy(message_pressfire[English],"Press fire to start              ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 27] message_pressfire$[French] ="Appuyez sur le feu pour commencer"
strcpy(message_pressfire[French],"Appuyez sur le feu pour commencer");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 28] message_pressfire$[Italian]="Premi il fuoco per iniziare      "
strcpy(message_pressfire[Italian],"Premi il fuoco per iniziare      ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 31] enum
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 40] dim messages$[3][5][48] as char
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 41] messages$[English][msg_hi]="Hi   "
strcpy(messages[English][msg_hi],"Hi   ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 42] messages$[French] [msg_hi]="Salut"
strcpy(messages[French][msg_hi],"Salut");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 43] messages$[Italian][msg_hi]="Ciao "
strcpy(messages[Italian][msg_hi],"Ciao ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 44] messages$[English][msg_bye]="Bye      "
strcpy(messages[English][msg_bye],"Bye      ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 45] messages$[French] [msg_bye]="Au revoir"
strcpy(messages[French][msg_bye],"Au revoir");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 46] messages$[Italian][msg_bye]="Addio    "
strcpy(messages[Italian][msg_bye],"Addio    ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 47] messages$[English][msg_win]="You win    "
strcpy(messages[English][msg_win],"You win    ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 48] messages$[French] [msg_win]="Vous gagnez"
strcpy(messages[French][msg_win],"Vous gagnez");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 49] messages$[Italian][msg_win]="Hai vinto  "
strcpy(messages[Italian][msg_win],"Hai vinto  ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 50] messages$[English][msg_lose]="You lose   "
strcpy(messages[English][msg_lose],"You lose   ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 51] messages$[French] [msg_lose]="Tu as perdu"
strcpy(messages[French][msg_lose],"Tu as perdu");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 52] messages$[Italian][msg_lose]="Hai presso "
strcpy(messages[Italian][msg_lose],"Hai presso ");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 53] messages$[English][msg_ready]="Get ready"
strcpy(messages[English][msg_ready],"Get ready");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 54] messages$[French] [msg_ready]="Sois pret"
strcpy(messages[French][msg_ready],"Sois pret");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 55] messages$[Italian][msg_ready]="Preparati"
strcpy(messages[Italian][msg_ready],"Preparati");
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 57] rapLocate 0,0
rapLocate(0,0);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 58] rapPrint "Press A,B,C to switch languages"
js_r_textbuffer=(char *)"Press A,B,C to switch languages";
rapPrint();
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 60] rapLocate 0,190
rapLocate(0,190);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 61] rapPrint convert_utf8("Special characters can work... êâîôûù")
js_r_textbuffer=(char *)convert_utf8("Special characters can work... êâîôûù");
rapPrint();
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 63] DIM pad1 AS INTEGER
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 63] pad1=0
pad1=0;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 66] do
for(;;)
  {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 67] local i as short
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 68] local j as short
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 70] vsync
    jsfVsync(0);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 71] pad1=jsfGetPad(1)
    pad1=jsfGetPad(1);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 72] if pad1 band JAGPAD_C then
    if(pad1 BAND JAGPAD_C)
      {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 73] language=English
        language=English;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 74] elseif pad1 band JAGPAD_B then
      }
    else if(pad1 BAND JAGPAD_B)
      {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 75] language=French
        language=French;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 76] elseif pad1 band JAGPAD_A then
      }
    else if(pad1 BAND JAGPAD_A)
      {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 77] language=Italian
        language=Italian;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 78] endif
      }
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 81] rapLocate 0,16
    rapLocate(0,16);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 82] rapPrint message_pressfire$[language]
    js_r_textbuffer=(char *)message_pressfire[language];
    rapPrint();
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 85] for i=0 to num_messages
    for(i=0; i<=num_messages; i+=1)
      {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 86] rapLocate 0,32+8*i
        rapLocate(0,32+8*i);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 87] rapPrint convert_utf8(messages$[language][i])
        js_r_textbuffer=(char *)convert_utf8(messages[language][i]);
        rapPrint();
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 88] next i
      }
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 89] loop
  }
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 92] function convert_utf8$(string$)
  while(1) {};   //  End of main program
}

// *************************************************
//                 Runtime Functions
// *************************************************

char BCX_TmpStr_buffer[256];
char *BCX_TmpStr (size_t Bites)
{
  BCX_TmpStr_buffer[Bites]=0;
  return &BCX_TmpStr_buffer[0]; //that's all you're gonna get ;)
//  static int   StrCnt;
//  static char *StrFunc[2048];
//  StrCnt=(StrCnt + 1) & 2047;
//  if(StrFunc[StrCnt]) free (StrFunc[StrCnt]);
//  return StrFunc[StrCnt]=(char*)calloc(Bites+128,sizeof(char));
}


char *string (int count, int a)
{
  if(count<1) return BCX_TmpStr(1);
  register char *strtmp = BCX_TmpStr(count);
  return (char*)memset(strtmp,a,count);
}



// ************************************
//       User Subs and Functions
// ************************************


char * convert_utf8 (char *string)
{
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 93] local c as UBYTE
  char *BCX_RetStr={0};
  static  UBYTE  c;
  memset(&c,0,sizeof(c));
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 94] local d as UBYTE
  static  UBYTE  d;
  memset(&d,0,sizeof(d));
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 95] local i as short
  static  short  i;
  memset(&i,0,sizeof(i));
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 96] local j as short
  static  short  j;
  memset(&j,0,sizeof(j));
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 97] local converted$
  static char converted[2048];
  memset(&converted,0,sizeof(converted));
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 98] j=0
  j=0;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 100] for i=0 to len(string$)
  for(i=0; i<=strlen(string); i+=1)
    {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 101] c=peek(((int)string$)+i)
      c=peek(((int)string)+i);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 102] if c=0xc3 then
      if(c==0xc3)
        {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 103] d=peek(((int)string$)+i+1)
          d=peek(((int)string)+i+1);
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 104] select case d
          for(;;)
          {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 105] case 0xaa
            if(d==0xaa)
              {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 106] c=41
                c=41;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 107] case 0xa2
                break;
              }
            if(d==0xa2)
              {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 108] c=36
                c=36;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 109] case 0xae
                break;
              }
            if(d==0xae)
              {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 110] c=60
                c=60;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 111] case 0xb4
                break;
              }
            if(d==0xb4)
              {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 112] c=43
                c=43;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 113] case 0xbb
                break;
              }
            if(d==0xbb)
              {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 114] c=125
                c=125;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 115] case 0xb9
                break;
              }
            if(d==0xb9)
              {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 116] c=126
                c=126;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 117] case else
                break;
              }
              // case else
              {
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 119] c=65
                c=65;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 120] end select
              }
            break;
          }
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 121] i++
          i++;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 122] endif
        }
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 123] poke strptr(converted$)+j,c
      *(volatile unsigned char*)(STRPTR(converted)+j)=(volatile unsigned char)      c;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 124] j++
      j++;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 125] next i
    }
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 126] poke (strptr(converted$)+j),0
  *(volatile unsigned char*)((STRPTR(converted)+j))=(volatile unsigned char)  0;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 127] function=converted$
  BCX_RetStr=BCX_TmpStr(strlen(converted));
  strcpy(BCX_RetStr,converted);
  return BCX_RetStr;
// [/home/tbone/Programming/jagstudio/projects/basic/localisation/localisation.bas - 128] end function
}


